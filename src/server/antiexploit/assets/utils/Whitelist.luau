local whitelist = {
	players = {}
}

local services = {
	players = game:GetService("Players")
}

local groupId = 0 #Use specific group Id

function whitelist:onPlayerAdded(player)
	if player:GetRankInGroup(groupId) >= math.floor(3 / 5 * 255) then
		self:addToList(player)
	end
end

function whitelist:onPlayerRemoved(player)
	self:removeFromList(player)
end

function whitelist:playerIsListed(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId then
			return true
		end
	end
	
	return false
end

function whitelist:playerIsWhitelisted(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId and plr.whitelisted then
			return true
		end
	end
	
	return false
end

function whitelist:whitelist(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId and not plr.whitelisted then
			plr.whitelisted = true
		end
	end
end

function whitelist:unwhitelist(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId and plr.whitelisted then
			plr.whitelisted = false
		end
	end
end

function whitelist:addToList(player)
	table.insert(self.players, {username = player.Name, userId = player.UserId, rank = player:GetRankInGroup(groupId), role = player:GetRoleInGroup(groupId), whitelisted = true})
end

function whitelist:removeFromList(player)
	for i, plr in pairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId then
			table.remove(self.players, i)
		end
	end
end

function whitelist:rankInGroup(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId then
			return plr.rank
		end
	end
end
	
function whitelist:roleInGroup(player)
	for i, plr in ipairs(self.players) do
		if plr.username == player.Name and plr.userId == player.UserId then
			return plr.role
		end
	end
end

return whitelist